{% extends 'base2.html' %}
{% block title %}Place List{% endblock %}

{% block content %}
    <h1>Username: {{ username }}</h1>
    <form method="post">
        {% csrf_token %}
        <label for="state">Select a state:</label>
        <select name="state" id="state" onchange="this.form.submit()">
            <option value="">--Select a state--</option>
            {% for state in states %}
                <option value="{{ state.0 }}" {% if selected_state and state.0 == selected_state %} selected {% endif %}>{{ state.1 }}</option>
            {% endfor %}
        </select>

        <label for="placename">Select a place:</label>
        <select name="placename" id="placename">
            <option value="">--Select a place--</option>
            {% for place in places %}
                <option value="{{ place.0 }}" {% if selected_place and place.0 == selected_place.0 %} selected {% endif %}>{{ place.1 }}</option>
            {% endfor %}
        </select>

        <button type="submit">Submit</button>
    </form>

    {% if selected_place %}
        <h2>Selected Place Details:</h2>
        <p>Place ID: {{ selected_place.0 }}</p>
        <p>Place Name: {{ selected_place.1 }}</p>
        <p>State ID: {{ selected_place.2 }}</p>
        <p>State Name: {{ selected_place.3 }}</p>
    {% endif %}
{% endblock %}
